## Builder Pattern

### 빌더 패턴이란?

- 복잡한 객체의 생성 과정과 표현 방법을 분리하여 다양한 구성의 인스턴스를 만드는 생성 패턴
- 생성자에 들어갈 매개변수를 메서드로 하나하나 받아들이고 마지막에 통합 빌드해서 객체를 생성하는 방식

### 빌더 패턴 탄생 배경

**점층적 생성자 패턴**
- 필수 매개변수와 함께 선택 매개변수를 0개, 1개, 2개 ... 받는 형태로, 우리가 다양한 매개변수를 입력받아 인스턴스를 생성하고 싶을때 사용하던 **생성자를 오버로딩** 하는 방식
- 클래스 인스턴스 필드들이 많으면 많을 수록 생성자에 들어갈 인자의 수가 늘어나 몇번째 인자가 어떤 필드였는지 햇갈릴 경우가 생김
- 생성자로만으로는 필드를 선택적으로 생략할 수 있는 방법이 없음
- 타입이 다양할 수록 생성자 메서드 수가 기하급수적으로 늘어나 가독성이나 유지보수 측면에서 좋지 않음
<br/>

**자바 빈(Java Beans) 패턴**
- 매개변수가 없는 생성자로 객체 생성 후 Setter 메소드를 이용해 클래스 필드의 초깃값을 설정하는 방식
- 점층적 생성자 패턴의 단점을 보완
- 가독성 문제점이 사라지고 선택적인 파라미터에 대해 해당되는 Setter 메서드를 호출함으로써 유연적으로 객체 생성이 가능해짐
- 하지만 객체 생성 시점에 모든 값들을 주입 하지 않아 `일관성(consistency)` 문제와 `불변성(immutable)` 문제가 발생
<br/>

```
1. 일관성 문제
 - 필수 매개변수란 객체가 초기화될때 반드시 설정되어야 하는 값
 - 일관성이 무너지면 객체가 유효하지 않은 상태
 - 해당 인스턴스를 사용 시 런타임 예외가 발생 할 수 있음

2. 불변성 문제
 - 자바 빈즈 패턴의 Setter 메서드는 객체를 처음 생성할때 필드값을 설정하기 위해 존재하는 메서드
 - 객체 생성 후에도 외부적으로 Setter 메소드를 노출하고 있음
 - 협업 과정에서 언제 어디서 누군가 Setter 메서드를 호출해 함부로 객체를 조작할 수 있음
 - 불변함을 보장할 수 없음
```

**빌더(Builder) 패턴**
- **별도의 Builder 클래스**를 만들어 메소드를 통해 **step-by-step** 으로 값을 입력받은 후에 최종적으로 build() 메소드로 하나의 인스턴스를 생성하여 리턴하는 패턴
- 일관성 및 불변성 문제 해결을 위해 탄생
```java
public static void main(String[] args) {

    // 생성자 방식
    Hamburger hamburger = new Hamburger(2, 3, 0, 3, 0, 0);

    // 빌더 방식
    Hamburger hamburger = new Hamburger.Builder(10)
        .bun(2)
        .patty(3)
        .lettuce(3)
        .build();
}
```